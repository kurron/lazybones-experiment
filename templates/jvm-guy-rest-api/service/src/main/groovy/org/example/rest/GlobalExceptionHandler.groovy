package org.example.rest

import org.example.rest.model.ErrorContext
import org.example.rest.model.SimpleMediaType
import org.springframework.http.HttpStatus
import org.springframework.http.ResponseEntity
import org.springframework.web.bind.annotation.ControllerAdvice
import org.springframework.web.bind.annotation.ExceptionHandler

/**
 * Will handle all errors generated by controllers.
 */
@SuppressWarnings('GroovyUnusedDeclaration')
@ControllerAdvice
class GlobalExceptionHandler {

    @ExceptionHandler
    ResponseEntity<SimpleMediaType> handleResourceNotFound( ResourceNotFoundException context ) {
        def error = new ErrorContext( title: 'title', code: context.code.toString(), message: 'message' )
        def control = new SimpleMediaType( error: error )
        new ResponseEntity<SimpleMediaType>( control, HttpStatus.NOT_FOUND )
    }
}
